# Project Brief: Semantic Kernel Agentic Framework

**Version:** 1.0 Draft
**Date:** 2025-01-27
**Status:** In Progress - Sections 1-4 Completed (包含深度分析)

---

## Executive Summary

**Semantic Kernel Agentic Framework** 是一個建立在 **Microsoft Semantic Kernel** 之上的企業級 AI Agent 編排框架。本項目充分利用 Semantic Kernel 的核心優勢——企業級穩定性、.NET 生態系統整合、多 AI 模型支援和強大的插件系統——創建一套完整、可擴展的 AI agent 工作流系統。

### 核心問題

當前 AI 應用開發缺乏統一的 agent 編排框架，導致每個項目都需要從頭開始構建 agent 協調邏輯、角色定義和工作流管理，增加了開發複雜度和維護成本。對於企業而言，內部 AI 能力無法快速複製和商業化，錯失市場機會。

### 市場策略

- **Phase 1（內部優先）**：首先作為內部 AI 開發基礎設施，提升團隊開發效率和 AI 應用質量
- **Phase 2（對外擴展）**：將成熟的 agent 流程和功能模組打包為可商業化的解決方案，服務外部客戶

### 目標市場

- **內部用戶**：企業開發團隊、AI 工程師、業務部門
- **外部客戶**：需要類似 AI agent 能力的企業客戶（未來商業化）
- **擴展市場**：研究人員、技術顧問、ISV 合作夥伴

### 核心價值主張（基於 Semantic Kernel）

- **企業級可靠性**：基於 Microsoft 官方支持的 Semantic Kernel，確保長期穩定性和技術支援
- **統一的 Agent 編排層**：標準化的 AI agent 定義、配置和部署方式
- **角色化設計**：預定義和自定義的 agent 角色系統，快速適配業務場景
- **多模型支援**：無縫整合 OpenAI、Azure OpenAI、HuggingFace 等多種 AI 模型
- **環境無關性**：一次開發，隨處部署（雲端、本地、邊緣）
- **商業化就緒**：內部驗證後可快速轉化為對外產品

---

## Problem Statement

### 當前狀態與痛點

#### 從 No-Code 到 Pro-Code 的必然演進

我們的 AI agent 探索始於 **Microsoft Copilot Studio**，這是一個為非技術用戶設計的 no-code/low-code AI agent 構建平台。Copilot Studio 承諾讓業務用戶能夠輕鬆創建對話式 AI，提供了友好的介面和豐富的功能模組（knowledge、topic、tools、agents）。

**然而，實踐證明了 No-Code 工具的根本性限制：**

##### 1. Knowledge 功能的準確性問題

- 雖然可以輕鬆連接 SharePoint、API 端點或上傳檔案
- 系統自動在後台處理知識索引
- 但即使搭配 topic 和 instruction 進行控制，knowledge 檢索的準確率仍然不理想
- **關鍵限制**：無法實現多模態返回（例如文字 + 圖片 + 圖表的組合輸出）
- 對於複雜的知識查詢場景，缺乏足夠的控制粒度

##### 2. 複雜度與靈活性的矛盾

- Copilot Studio 看似簡單，但要實現實際業務需求時變得異常複雜
- 非技術用戶投入大量時間配置後仍無法達到預期效果
- 功能模組（knowledge、topic、tools、agents）各有限制，組合使用時更加困難
- 缺乏深度定制能力，無法突破平台預設的邊界

##### 3. 技術債務的隱性累積

- No-code 平台的"黑盒"特性導致問題難以診斷和優化
- 當需求超出平台能力時，已投入的時間和配置難以遷移
- 無法利用企業現有的技術資產和開發能力

**核心洞察：**
> **"易於上手 ≠ 能夠交付"** - No-code 工具降低了入門門檻，但也築起了能力天花板。當業務需求超越工具設計預期時，我們需要一個提供完整控制權的 pro-code 框架，同時保留快速開發的優勢。

#### 內部開發挑戰（Pro-Code 層面）

##### 4. 重複造輪子的困境

- 即使放棄 Copilot Studio，每個新的 AI 項目仍需從零開始構建 agent 架構
- 缺乏標準化的 agent 角色定義和交互模式
- 開發者花費大量時間在基礎設施而非業務邏輯創新
- 不同項目之間的 AI 能力無法復用，持續浪費資源

##### 5. 技術債務累積

- 各個項目使用不同的 AI 整合方式，維護成本高
- 缺乏統一的最佳實踐和設計模式
- AI 模型升級或切換困難，影響系統靈活性
- 測試和監控分散，質量保證困難

##### 6. 業務敏捷性不足

- 新業務場景需要長時間開發周期
- AI 能力難以快速組合和調整以應對需求變化
- 跨部門協作時缺乏共同語言和工具基礎

#### 商業化障礙

##### 7. 內部能力無法外部化

- 已驗證的 AI agent 解決方案綁定在特定項目中，難以提取
- 缺乏將內部成功案例打包為可銷售產品的機制
- 定制化客戶需求時需要大量重構工作
- 無法快速響應市場機會

### 問題影響（量化）

- **No-Code 投資損失**：在 Copilot Studio 上的時間和配置投入無法轉化為可用資產
- **開發效率損失**：估計 40-60% 的 AI 項目開發時間花在基礎架構而非業務創新
- **維護成本**：多套異構 AI 系統導致維護人力成本增加 2-3 倍
- **功能交付缺口**：關鍵功能需求（如多模態輸出、精確 knowledge 控制）無法實現
- **機會成本**：無法快速響應業務需求，錯失市場窗口期
- **商業化延遲**：從內部驗證到對外產品化需要 6-12 個月重構時間

### 現有解決方案的不足

#### 為什麼現有工具不夠：

##### 1. Microsoft Copilot Studio（已驗證不足）

- ✅ 優勢：No-code 介面、快速原型、Microsoft 生態整合
- ❌ 致命限制：
  - Knowledge 檢索準確率不足
  - 無法實現多模態輸出（文字+圖片+圖表）
  - 功能模組限制多，組合使用困難
  - 黑盒特性導致優化空間有限
  - 非技術用戶花費大量時間仍無法滿足需求

##### 2. 通用 AI 框架（如 LangChain、LlamaIndex）

- 過於通用，缺乏企業級 agent 編排的最佳實踐
- 主要聚焦在 Python 生態系統，與企業 .NET 技術棧整合困難
- 缺乏商業化支持和長期穩定性保證

##### 3. 直接使用 Semantic Kernel

- SK 提供了優秀的基礎能力和 Microsoft 生態整合
- 相比 Copilot Studio，提供了完整的程式化控制能力
- **但不是完整的 agent 框架**：需要在 SK 之上構建 agent 角色、工作流編排、狀態管理、knowledge 策略
- 缺乏開箱即用的 agent 模板和業務場景適配

##### 4. 自研 Agent 系統（從零開始）

- 開發周期長，技術風險高
- 缺乏社群支持和生態系統
- 難以吸引外部開發者和客戶採用

### 為什麼選擇 Semantic Kernel 作為基礎

基於 Copilot Studio 的實踐經驗，我們明確了對下一代 framework 的要求：

1. **程式化控制權**：完整的 code-level 控制，不受限於預設功能
2. **企業級穩定性**：Microsoft 官方支持，與現有技術棧無縫整合
3. **Knowledge 精確控制**：能夠實現高準確率的檢索和多模態輸出
4. **擴展性**：可以基於業務需求自由擴展功能
5. **商業化就緒**：能夠打包為產品對外銷售

**Semantic Kernel 是理想的基礎層**，因為它：
- ✅ 提供程式化控制，克服 Copilot Studio 的限制
- ✅ Microsoft 官方支持，確保長期穩定性
- ✅ 支援 .NET 生態系統，符合企業技術棧
- ✅ 多 AI 模型支援（OpenAI、Azure OpenAI、本地模型）
- ✅ 強大的 plugin 系統和 memory 管理能力
- ✅ 但需要在其上構建完整的 agent 編排框架

### 為什麼現在解決這個問題

1. **痛點已驗證**：Copilot Studio 的實踐證明了 no-code 方案的局限性
2. **技術成熟度**：Semantic Kernel 已發展到穩定版本，提供可靠的技術基礎
3. **市場時機**：企業對 AI agent 的需求爆發式增長，先行者優勢明顯
4. **內部驅動力**：公司內部多個項目都需要高級 agent 能力，統一框架能立即產生價值
5. **商業機會**：驗證後的 agent 解決方案可以快速商業化，創造新的收入來源
6. **技術債務避免**：現在投資正確的框架，避免未來更大的遷移成本

---

## Proposed Solution

### 核心概念

**Semantic Kernel Agentic Framework** 是一個建立在 Microsoft Semantic Kernel 之上的**企業級 AI Agent 編排框架**，填補了 Semantic Kernel（底層能力）與完整 agent 應用（業務需求）之間的空白。

我們的解決方案採取**分層架構**設計：

```
┌─────────────────────────────────────────────────────┐
│   Client Applications（客戶端應用）                  │
│   ┌──────────────┐  ┌──────────────┐  ┌──────────┐ │
│   │  Web App     │  │  Mobile App  │  │  Desktop │ │
│   │  (React/Vue) │  │  (iOS/Android│  │   App    │ │
│   └──────┬───────┘  └──────┬───────┘  └────┬─────┘ │
│          │                  │                │       │
│          └──────────────────┴────────────────┘       │
│                           │                          │
├───────────────────────────┼──────────────────────────┤
│   Client Integration Layer（客戶端整合層）          │
│   ┌──────────────────────┴──────────────────────┐   │
│   │  RESTful API / GraphQL / WebSocket / gRPC  │   │
│   │  - Agent 調用 API                           │   │
│   │  - 實時通訊 (WebSocket/SignalR)             │   │
│   │  - 流式輸出 (SSE)                           │   │
│   └────────────────────┬────────────────────────┘   │
│   ┌────────────────────┴────────────────────────┐   │
│   │  Client SDKs（多平台 SDK）                  │   │
│   │  - JavaScript/TypeScript SDK                │   │
│   │  - .NET SDK                                 │   │
│   │  - Python SDK                               │   │
│   │  - iOS/Android Native SDK                   │   │
│   └─────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────┤
│   API Gateway & Security Layer（API 閘道與安全層） │
│   - 認證與授權 (OAuth2/JWT)                         │
│   - Rate Limiting                                   │
│   - Request Validation                              │
│   - 租戶路由                                        │
├─────────────────────────────────────────────────────┤
│   Agentic Framework（Agent 編排框架 - 本項目）     │
│   ┌─────────────────────────────────────────────┐   │
│   │  Agent Orchestration Engine                 │   │
│   │  - Agent 路由與調度                         │   │
│   │  - 工作流執行引擎                           │   │
│   │  - 會話管理                                 │   │
│   └─────────────────────────────────────────────┘   │
│   ┌─────────────────────────────────────────────┐   │
│   │  Knowledge & Memory Management              │   │
│   │  - 精確檢索策略                             │   │
│   │  - 多模態輸出控制                           │   │
│   │  - 上下文管理                               │   │
│   └─────────────────────────────────────────────┘   │
│   ┌─────────────────────────────────────────────┐   │
│   │  Agent Role System                          │   │
│   │  - 角色定義與管理                           │   │
│   │  - 能力映射                                 │   │
│   └─────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────┤
│   Semantic Kernel（SK 基礎層）                      │
│   - AI 模型抽象與整合                               │
│   - Plugin 系統                                     │
│   - Planner & Memory                                │
├─────────────────────────────────────────────────────┤
│   Infrastructure & AI Models（基礎設施與 AI 模型）  │
│   - Azure OpenAI / OpenAI                           │
│   - Vector DB (Azure AI Search/Pinecone)            │
│   - Cache & Queue (Redis/Azure Service Bus)        │
└─────────────────────────────────────────────────────┘
```

### Web/Mobile App 連接方式

#### 方式 1：RESTful API（最通用）
```javascript
// Web App 範例
import { AgenticClient } from '@your-company/agentic-sdk';

const client = new AgenticClient({
  endpoint: 'https://api.your-domain.com',
  apiKey: 'your-api-key'
});

// 調用 agent
const response = await client.agents.invoke({
  agentRole: 'customer-service',
  message: '我需要查詢訂單狀態',
  sessionId: 'user-session-123',
  context: { userId: '12345' }
});

// 處理多模態輸出
if (response.type === 'multimodal') {
  // response.data.text
  // response.data.images[]
  // response.data.charts[]
}
```

#### 方式 2：WebSocket/SignalR（實時通訊）
適用於需要實時對話的場景，支援即時狀態更新。

#### 方式 3：Server-Sent Events（流式輸出）
適用於長文本生成場景，逐步顯示生成內容。

#### 方式 4：Mobile Native SDK
提供 iOS/Android 原生 SDK，優化移動端體驗。

### 關鍵解決方案組件

#### 1. 突破 Copilot Studio 限制的核心能力

**精確 Knowledge 管理系統**
- **多層檢索策略**：支援向量搜索、關鍵字匹配、混合檢索等多種策略
- **可調控制粒度**：開發者可以精確控制檢索參數、排序邏輯和結果過濾
- **多模態輸出引擎**：
  - 文字 + 圖片組合返回
  - 動態圖表生成（基於數據自動生成視覺化）
  - 結構化數據 + 視覺呈現
- **準確率優化**：支援自定義 re-ranking、結果驗證和質量評分

**完整程式化控制**
- 所有功能都是 code-first，提供 API 和配置兩種方式
- 開發者擁有完整的控制權，沒有隱藏的"黑盒"
- 支援自定義擴展和深度整合

#### 2. Agent 角色與編排系統

**角色化 Agent 設計**
- **預定義角色庫**：常見業務角色（客服助手、數據分析師、內容創作者等）
- **角色配置系統**：通過配置文件或程式碼定義 agent 能力、personality 和行為模式
- **動態角色創建**：支援在運行時創建和調整 agent 角色

**Agent 編排引擎**
- **工作流定義**：支援順序、並行、條件分支等複雜工作流
- **Agent 協作模式**：
  - 層級式：Manager-Worker 模式
  - 平行式：多個 agent 協同工作
  - 動態路由：根據任務類型自動分配 agent
- **狀態管理**：會話狀態、agent 記憶、上下文傳遞

#### 3. 企業級基礎能力

**多環境部署支援**
- **雲端部署**：Azure、AWS、GCP
- **本地部署**：Docker、Kubernetes
- **邊緣部署**：輕量級運行時，支援離線場景
- **一次開發，隨處部署**：統一的部署描述和配置系統

**可觀測性與監控**
- **實時監控**：Agent 執行狀態、性能指標、錯誤追蹤
- **日誌系統**：結構化日誌，支援審計和問題診斷
- **成本追蹤**：AI 模型調用次數、token 使用量、成本分析

**安全與合規**
- **訪問控制**：基於角色的權限管理
- **數據隔離**：多租戶支援，數據安全隔離
- **合規性**：支援 GDPR、CCPA 等數據保護法規要求

#### 4. 商業化就緒特性

**產品化支援**
- **模組打包**：將驗證的 agent 流程打包為可銷售的模組
- **租戶管理**：Multi-tenant 架構，支援 SaaS 模式
- **客製化層**：標準產品 + 客製化擴展的雙層設計
- **授權與計量**：內建授權機制和使用量計量

**開發者體驗**
- **腳手架工具**：快速創建新 agent 項目
- **豐富文檔**：API 參考、最佳實踐、示例代碼
- **調試工具**：Agent 執行追蹤、可視化調試
- **測試框架**：支援 unit test、integration test、E2E test

### 為什麼這個方案會成功

1. **站在巨人的肩膀上**
   - 基於 Semantic Kernel 的穩定基礎，而非重新發明輪子
   - 繼承 Microsoft 生態系統的企業級質量和支持

2. **學習自實踐經驗**
   - Copilot Studio 的教訓直接轉化為設計要求
   - 知道什麼是真正的痛點，而非理論上的問題

3. **內外雙循環驗證**
   - 內部使用快速迭代和驗證
   - 成熟後對外商業化，降低市場風險

4. **平衡抽象與靈活性**
   - 提供開箱即用的 agent 模板（快速開發）
   - 保留完整的程式化控制（深度定制）
   - 不會重蹈 Copilot Studio"易用但不好用"的覆轍

5. **企業級技術棧**
   - .NET 生態系統符合企業主流技術選擇
   - Microsoft 官方支持確保長期可維護性
   - 與 Azure 服務深度整合

### 高層次產品願景

**短期（內部使用）**
- 統一公司內部所有 AI agent 開發
- 提升開發效率 3-5 倍
- 建立標準化的 agent 開發流程和最佳實踐

**中期（產品化）**
- 將驗證的 agent 解決方案打包為標準產品
- 服務外部企業客戶
- 建立 agent 市場（marketplace），允許第三方開發和銷售 agent

**長期（生態系統）**
- 成為企業 AI agent 開發的首選框架
- 建立開發者社群和合作夥伴網絡
- 推動 Semantic Kernel agent 編排的標準化

### 關鍵風險與緩解措施

#### 高風險領域

**1. Knowledge 檢索準確率**
- **風險**：無法顯著超越 Copilot Studio
- **緩解**：建立評估基準、早期測試、持續優化、人類反饋循環

**2. 多模態生成成本與延遲**
- **風險**：成本高、延遲大影響用戶體驗
- **緩解**：智能緩存、可配置輸出、異步處理、成本預算控制

**3. Multi-Tenant 架構複雜度**
- **風險**：後期重構成本高
- **緩解**：架構設計階段就考慮 Multi-Tenant，即使 MVP 是 Single-Tenant

#### 建議的實施策略

**時間線建議**：採用更現實的 24 個月計劃
- **Month 1-6**：MVP 開發和內部試用
- **Month 7-12**：穩定的內部產品
- **Month 13-18**：Beta 版本對外發布（而非完整產品）
- **Month 19-24**：正式商業化

**優先級建議**：
1. 先聚焦內部價值（統一開發框架、提升效率）
2. 商業化作為長期目標，不要過早投入大量資源
3. 從小範圍試點開始商業化，逐步擴展

---

